<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Página 08</title>

    <!-- Estilos -->
    <link rel="stylesheet" href="../css/estilos.css">

    <!-- Librerias -->
    <script src="../js/librerias/jquery.min.js"></script>
    <script src="../js/librerias/jquery-ui.min.js"></script>
    <script src="../js/librerias/jquery.ui.touch-punch.min.js"></script>
    <script src="../js/librerias/gsap.min.js"></script>

    <!-- Script de animaciones -->
    <script src="../js/animaciones.js"></script>
    <!-- Scripts posicionar elementos -->
    <script src="../js/redimensionarElementos.js"></script>
    <script src="../js/posicionar.js"></script>

</head>
<style>
    .pointer{
        cursor: pointer;
    }
</style>
<body class="pagina">
    <img class="elementos" id="fondo" src="../img/pagina08/fondo.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="btnComenzar" src="../img/pagina08/btnComenzar.png" data-posX="612" data-posY="452" alt="">

    <img class="elementos" id="base" src="../img/pagina08/base.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos" id="pregunta1" src="../img/pagina08/pregunta1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pregunta2" src="../img/pagina08/pregunta2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pregunta3" src="../img/pagina08/pregunta3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pregunta4" src="../img/pagina08/pregunta4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos" id="pregunta5" src="../img/pagina08/pregunta5.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos pointer" id="opciones1" src="../img/pagina08/opciones1.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos pointer" id="opciones2" src="../img/pagina08/opciones2.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos pointer" id="opciones3" src="../img/pagina08/opciones3.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos pointer" id="opciones4" src="../img/pagina08/opciones4.png" data-posX="0" data-posY="0" alt="">
    <img class="elementos pointer" id="opciones5" src="../img/pagina08/opciones5.png" data-posX="0" data-posY="0" alt="">

    <img class="elementos respuestas1 pointer" id="respuesta1" src="../img/pagina08/respuesta1.png" data-posX="268" data-posY="235" alt="">
    <img class="elementos respuestas1 pointer" id="respuesta2" src="../img/pagina08/respuesta2.png" data-posX="268" data-posY="397" alt="">
    <img class="elementos respuestas2 pointer" id="respuesta3" src="../img/pagina08/respuesta3.png" data-posX="268" data-posY="235" alt="">
    <img class="elementos respuestas2 pointer" id="respuesta4" src="../img/pagina08/respuesta4.png" data-posX="268" data-posY="343" alt="">
    <img class="elementos respuestas3 pointer" id="respuesta5" src="../img/pagina08/respuesta5.png" data-posX="268" data-posY="343" alt="">
    <img class="elementos respuestas3 pointer" id="respuesta6" src="../img/pagina08/respuesta6.png" data-posX="268" data-posY="397" alt="">
    <img class="elementos respuestas4 pointer" id="respuesta7" src="../img/pagina08/respuesta7.png" data-posX="268" data-posY="235" alt="">
    <img class="elementos respuestas4 pointer" id="respuesta8" src="../img/pagina08/respuesta8.png" data-posX="268" data-posY="451" alt="">
    <img class="elementos respuestas5 pointer" id="respuesta9" src="../img/pagina08/respuesta9.png" data-posX="268" data-posY="235" alt="">
    <img class="elementos respuestas5 pointer" id="respuesta10" src="../img/pagina08/respuesta10.png" data-posX="268" data-posY="289" alt="">

 
    <img class="elementos" id="retroBuena" src="../img/pagina08/retroBuena.png" data-posX="0" data-posY="0"/>
    <img class="elementos" id="retroMala" src="../img/pagina08/retroMala.png" data-posX="0" data-posY="0"/>
    <img class="elementos" id="btnReiniciar" src="../img/pagina08/btnReiniciar.png" data-posX="650" data-posY="423"/>
    <p class="elementos" id="calificacion" style="color: white;"></p>


    <!-- Script de la página -->
    <script>

        // Variable----------------------------------------------------
        let aplicacion = parent;

        const fondo = $('#fondo');
        const btnComenzar = $('#btnComenzar');

        const base = $('#base');

        const pregunta1= $('#pregunta1');
        const pregunta2= $('#pregunta2');
        const pregunta3= $('#pregunta3');
        const pregunta4= $('#pregunta4');
        const pregunta5= $('#pregunta5');
        
        const opciones1= $('#opciones1');
        const opciones2= $('#opciones2');
        const opciones3= $('#opciones3');
        const opciones4= $('#opciones4');
        const opciones5= $('#opciones5');

        const respuesta1= $('#respuesta1');
        const respuesta2= $('#respuesta2');
        const respuesta3= $('#respuesta3');
        const respuesta4= $('#respuesta4');
        const respuesta5= $('#respuesta5');
        const respuesta6= $('#respuesta6');
        const respuesta7= $('#respuesta7');
        const respuesta8= $('#respuesta8');
        const respuesta9= $('#respuesta9');
        const respuesta10= $('#respuesta10');


        const respuestas1 = $('.respuestas1');
        const respuestas2 = $('.respuestas2');
        const respuestas3 = $('.respuestas3');
        const respuestas4 = $('.respuestas4');
        const respuestas5 = $('.respuestas5');

        const retroBuena = $('#retroBuena');
        const retroMala = $('#retroMala');
        const btnReiniciar = $('#btnReiniciar');

        let numRespuestas = 0;
        let aciertos = 0;


        // Audios------------------------------------------------------
        const audio = [
            new Audio('../audios/TMS_OEA_M9_08_1.mp3'),
            new Audio('../audios/TMS_OEA_M9_08_2.mp3'),
            new Audio('../audios/TMS_OEA_M9_08_3.mp3'),
        ]

        // Al cargarse la página
        $(window).on("load", function(){
            redimensionarElementos();
            aplicacion.cargando(iniciarContenido);
        });

        function iniciarContenido(){
            aplicacion.reproducirAudio(audio[0], comenzar, 1);
            animacionEntrada(fondo, 'default', 1, 1);
        }

        function comenzar(){
            parpadear(btnComenzar);
        }

        function question1(){
            animacionEntrada(base, 'default', 1);
            animacionEntrada(pregunta1, 'arriba-abajo', 1);
            animacionEntrada(opciones1, 'derecha-izquierda', 1, 1);
            animacionEntrada(respuesta1, 'derecha-izquierda', 1, 1);
            animacionEntrada(respuesta2, 'derecha-izquierda', 1, 1);
        }

        function question2(){
            numRespuestas = 0;
            console.log('Numero de respuestas: ', numRespuestas);

            animacionSalida(pregunta1, 'default', 1);
            animacionSalida(opciones1, 'default', 1);
            animacionSalida(respuesta1, 'default', 1);
            animacionSalida(respuesta2, 'default', 1);

            animacionEntrada(pregunta2, 'arriba-abajo', 1, 1);
            animacionEntrada(opciones2, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta3, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta4, 'derecha-izquierda', 1, 1.5);

        }
        function question3(){
            numRespuestas = 0;
            console.log('Numero de respuestas: ', numRespuestas);

            animacionSalida(pregunta2, 'default', 1);
            animacionSalida(opciones2, 'default', 1);
            animacionSalida(respuesta3, 'default', 1);
            animacionSalida(respuesta4, 'default', 1);

            animacionEntrada(pregunta3, 'arriba-abajo', 1, 1);
            animacionEntrada(opciones3, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta5, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta6, 'derecha-izquierda', 1, 1.5);

        }
        function question4(){
            numRespuestas = 0;
            console.log('Numero de respuestas: ', numRespuestas);

            animacionSalida(pregunta3, 'default', 1);
            animacionSalida(opciones3, 'default', 1);
            animacionSalida(respuesta5, 'default', 1);
            animacionSalida(respuesta6, 'default', 1);

            animacionEntrada(pregunta4, 'arriba-abajo', 1, 1);
            animacionEntrada(opciones4, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta7, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta8, 'derecha-izquierda', 1, 1.5);

        }
        function question5(){
            numRespuestas = 0;
            console.log('Numero de respuestas: ', numRespuestas);

            animacionSalida(pregunta4, 'default', 1);
            animacionSalida(opciones4, 'default', 1);
            animacionSalida(respuesta7, 'default', 1);
            animacionSalida(respuesta8, 'default', 1);

            animacionEntrada(pregunta5, 'arriba-abajo', 1, 1);
            animacionEntrada(opciones5, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta9, 'derecha-izquierda', 1, 1.5);
            animacionEntrada(respuesta10, 'derecha-izquierda', 1, 1.5);

        }

        function evaluacion(){
            const calificacion = ((aciertos * 100) / 10).toFixed();

            if(calificacion >= 80){
                retroalimentacionBuena(calificacion);

            }else if(calificacion < 80){
                retroalimentacionMala(calificacion);
            }
            
            aplicacion.guardarCalificacion(calificacion);
        }

        function retroalimentacionBuena(calificacion){
  
            setTimeout(() => {
                const p = $('#calificacion');

                p.html(`${calificacion}`);
                p.css({
                    'fontSize': '32px',
                    'top': '397px',
                    'left': '729px'
                });

                aplicacion.reproducirAudio(audio[1], finalPagina, 1);
                animacionEntrada(p, 'default', 1, 1);
                animacionEntrada(retroBuena, 'default', 1, 1);
            }, 200);
        }
        function retroalimentacionMala(calificacion){
            setTimeout(() => {
                const p = $('#calificacion');

                p.html(`${calificacion}`);
                p.css({
                    'fontSize': '32px',
                    'top': '173px',
                    'left': '702px'
                });

                aplicacion.reproducirAudio(audio[2], clickReintentar, 1);
                animacionEntrada(p, 'default', 1, 1);
                animacionEntrada(retroMala, 'default', 1, 1);
            }, 200);
        }

        function clickReintentar(){
            parpadear(btnReiniciar)
        }


        function finalPagina(){
            aplicacion.terminaPantalla();
        }

        btnComenzar.click(function(){
            if(btnComenzar.css('cursor') == 'pointer'){
                dejarParpadear(btnComenzar);
                animacionSalida(btnComenzar, 'default', 1);
                animacionEntrada(fondo, 'default', 1, 1);

                setTimeout(() => {
                    question1();
                }, 500);
            }
        });

        opciones1.click(function(){
            if(opciones1.css('cursor') == 'pointer'){
                numRespuestas++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question2();
                    }, 300);
                }
            }
        });
        opciones2.click(function(){
            if(opciones2.css('cursor') == 'pointer'){
                numRespuestas++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question3();
                    }, 300);
                }
            }
        });
        opciones3.click(function(){
            if(opciones3.css('cursor') == 'pointer'){
                numRespuestas++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question4();
                    }, 300);
                }
            }
        });
        opciones4.click(function(){
            if(opciones4.css('cursor') == 'pointer'){
                numRespuestas++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question5();
                    }, 300);
                }
            }
        });
        opciones5.click(function(){
            if(opciones5.css('cursor') == 'pointer'){
                numRespuestas++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        evaluacion();
                    }, 300);
                }
            }
        });


        respuestas1.click(function(){
            if(respuestas1.css('cursor') == 'pointer'){
                numRespuestas++;
                aciertos++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question2();
                    }, 300);
                }
            }
        });
        respuestas2.click(function(){
            if(respuestas2.css('cursor') == 'pointer'){
                numRespuestas++;
                aciertos++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question3();
                    }, 300);
                }
            }
        });
        respuestas3.click(function(){
            if(respuestas3.css('cursor') == 'pointer'){
                numRespuestas++;
                aciertos++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question4();
                    }, 300);
                }
            }
        });
        respuestas4.click(function(){
            if(respuestas4.css('cursor') == 'pointer'){
                numRespuestas++;
                aciertos++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        question5();
                    }, 300);
                }
            }
        });
        respuestas5.click(function(){
            if(respuestas5.css('cursor') == 'pointer'){
                numRespuestas++;
                aciertos++;

                if(numRespuestas === 2){
                    setTimeout(() => {
                        evaluacion();
                    }, 300);
                }
            }
        });

        btnReiniciar.click(function(){
            if(btnReiniciar.css('cursor') == 'pointer'){
                dejarParpadear(btnReiniciar);
                aplicacion.recargarPagina();
            }
        });

        
 

    </script>
</body>
</html>